
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="L. M. Jensen">
      
      
        <link rel="canonical" href="https://lmelwyn.github.com//">
      
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.1.21">
    
    
      
        <title>Molecular projects</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.eebd395e.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="orange" data-md-color-accent="orange">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="Molecular projects" class="md-header__button md-logo" aria-label="Molecular projects" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 11a1 1 0 0 1 1 1 1 1 0 0 1-1 1 1 1 0 0 1-1-1 1 1 0 0 1 1-1M4.22 4.22C5.65 2.79 8.75 3.43 12 5.56c3.25-2.13 6.35-2.77 7.78-1.34 1.43 1.43.79 4.53-1.34 7.78 2.13 3.25 2.77 6.35 1.34 7.78-1.43 1.43-4.53.79-7.78-1.34-3.25 2.13-6.35 2.77-7.78 1.34-1.43-1.43-.79-4.53 1.34-7.78-2.13-3.25-2.77-6.35-1.34-7.78m11.32 4.24c.61.62 1.17 1.25 1.69 1.88 1.38-2.13 1.88-3.96 1.13-4.7-.74-.75-2.57-.25-4.7 1.13.63.52 1.26 1.08 1.88 1.69m-7.08 7.08c-.61-.62-1.17-1.25-1.69-1.88-1.38 2.13-1.88 3.96-1.13 4.7.74.75 2.57.25 4.7-1.13-.63-.52-1.26-1.08-1.88-1.69m-2.82-9.9c-.75.74-.25 2.57 1.13 4.7.52-.63 1.08-1.26 1.69-1.88.62-.61 1.25-1.17 1.88-1.69-2.13-1.38-3.96-1.88-4.7-1.13m4.24 8.48c.7.7 1.42 1.34 2.12 1.91.7-.57 1.42-1.21 2.12-1.91.7-.7 1.34-1.42 1.91-2.12-.57-.7-1.21-1.42-1.91-2.12-.7-.7-1.42-1.34-2.12-1.91-.7.57-1.42 1.21-2.12 1.91-.7.7-1.34 1.42-1.91 2.12.57.7 1.21 1.42 1.91 2.12m8.48 4.24c.75-.74.25-2.57-1.13-4.7-.52.63-1.08 1.26-1.69 1.88-.62.61-1.25 1.17-1.88 1.69 2.13 1.38 3.96 1.88 4.7 1.13Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Molecular projects
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Introduction
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/lmelwyn/molecular" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Molecular projects" class="md-nav__button md-logo" aria-label="Molecular projects" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 11a1 1 0 0 1 1 1 1 1 0 0 1-1 1 1 1 0 0 1-1-1 1 1 0 0 1 1-1M4.22 4.22C5.65 2.79 8.75 3.43 12 5.56c3.25-2.13 6.35-2.77 7.78-1.34 1.43 1.43.79 4.53-1.34 7.78 2.13 3.25 2.77 6.35 1.34 7.78-1.43 1.43-4.53.79-7.78-1.34-3.25 2.13-6.35 2.77-7.78 1.34-1.43-1.43-.79-4.53 1.34-7.78-2.13-3.25-2.77-6.35-1.34-7.78m11.32 4.24c.61.62 1.17 1.25 1.69 1.88 1.38-2.13 1.88-3.96 1.13-4.7-.74-.75-2.57-.25-4.7 1.13.63.52 1.26 1.08 1.88 1.69m-7.08 7.08c-.61-.62-1.17-1.25-1.69-1.88-1.38 2.13-1.88 3.96-1.13 4.7.74.75 2.57.25 4.7-1.13-.63-.52-1.26-1.08-1.88-1.69m-2.82-9.9c-.75.74-.25 2.57 1.13 4.7.52-.63 1.08-1.26 1.69-1.88.62-.61 1.25-1.17 1.88-1.69-2.13-1.38-3.96-1.88-4.7-1.13m4.24 8.48c.7.7 1.42 1.34 2.12 1.91.7-.57 1.42-1.21 2.12-1.91.7-.7 1.34-1.42 1.91-2.12-.57-.7-1.21-1.42-1.91-2.12-.7-.7-1.42-1.34-2.12-1.91-.7.57-1.42 1.21-2.12 1.91-.7.7-1.34 1.42-1.91 2.12.57.7 1.21 1.42 1.91 2.12m8.48 4.24c.75-.74.25-2.57-1.13-4.7-.52.63-1.08 1.26-1.69 1.88-.62.61-1.25 1.17-1.88 1.69 2.13 1.38 3.96 1.88 4.7 1.13Z"/></svg>

    </a>
    Molecular projects
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/lmelwyn/molecular" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Introduction
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        Introduction
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#quickstart" class="md-nav__link">
    Quickstart
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    Usage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    Background
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#links" class="md-nav__link">
    Links
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#quickstart" class="md-nav__link">
    Quickstart
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    Usage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    Background
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#links" class="md-nav__link">
    Links
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="introduction">Introduction</h1>
<p>!!! missing still work in progress. More to come</p>
<p>As a software developer or even as a researcher you may sometime end up in situations
where you feel the need of a data center on your laptop either to develop or run more
complex software systems, or just occasionally need to spin up applications you really
want to isolate. If you also need to share your setup with others or just want to work
in a systematic and reproducible way this repo documents a simple <a href="https://en.wikipedia.org/wiki/Desire_path"><strong>desire path</strong></a> solution based on a small collection of standard and (somewhat) mature software projects,
<a href="https://docs.ansible.com/ansible/latest/index.html">Ansible</a>,
<a href="https://ansible.readthedocs.io/projects/molecule/">Molecule</a>,
<a href="https://developer.hashicorp.com/vagrant/docs">Vagrant</a>, and
<a href="https://libvirt.org/manpages/libvirtd.html">libvirt</a>
In addition, the repo can also be used to aggregate software and documentation from
multiple independent repos as git submodules.</p>
<h2 id="quickstart">Quickstart</h2>
<ol>
<li><a href="#installation">Prepare your system</a></li>
<li>Clone the repo</li>
<li>Choose a project</li>
<li>Fetch an image</li>
<li>Create a scenario</li>
<li>Converge the scenario</li>
</ol>
<p>Create fedora 35 kvm vm using the molecule-libvirt driver to test a
project running with the molecule-podman driver.</p>
<div class="codehilite"><pre><span></span><code><span class="w">     </span><span class="err">$</span><span class="w"> </span><span class="nx">git</span><span class="w"> </span><span class="nx">clone</span><span class="w"> </span><span class="p">..</span>
<span class="w">     </span><span class="err">$</span><span class="w"> </span><span class="nx">cd</span><span class="w"> </span><span class="nx">molecular</span>
<span class="w">     </span><span class="err">$</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="nx">bin</span><span class="o">/</span><span class="nx">install</span><span class="p">.</span><span class="nx">sh</span><span class="w"> </span><span class="nx">libvirt</span><span class="w">         </span><span class="err">#</span><span class="w"> </span><span class="nx">install</span><span class="w"> </span><span class="nx">rpm</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="nx">python</span><span class="w"> </span><span class="nx">packages</span>
<span class="w">     </span><span class="err">$</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="nx">bin</span><span class="o">/</span><span class="nx">get</span><span class="w"> </span><span class="nx">fedora35</span><span class="w">               </span><span class="err">#</span><span class="w"> </span><span class="nx">fetches</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="nx">fedora</span><span class="w"> </span><span class="mi">35</span><span class="w"> </span><span class="nx">qcow2</span><span class="w"> </span><span class="nx">image</span>
<span class="w">     </span><span class="err">$</span><span class="w"> </span><span class="nx">molecule</span><span class="w"> </span><span class="nx">create</span><span class="w"> </span><span class="o">-</span><span class="nx">s</span><span class="w"> </span><span class="nx">vm</span><span class="w">            </span><span class="err">#</span><span class="w"> </span><span class="nx">creates</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">fedora</span><span class="w"> </span><span class="mi">35</span><span class="w"> </span><span class="nx">vm</span>
<span class="w">     </span><span class="err">$</span><span class="w"> </span><span class="nx">molecule</span><span class="w"> </span><span class="nx">converge</span><span class="w"> </span><span class="o">-</span><span class="nx">s</span><span class="w"> </span><span class="nx">vm</span><span class="w">          </span><span class="err">#</span><span class="w"> </span><span class="nx">run</span><span class="w"> </span><span class="nx">project</span><span class="w"> </span><span class="nx">tasks</span><span class="w"> </span><span class="nx">inside</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">vm</span>
<span class="w">     </span><span class="err">$</span><span class="w"> </span><span class="nx">molecule</span><span class="w"> </span><span class="nx">list</span>
<span class="w">     </span><span class="err">$</span><span class="w"> </span><span class="nx">molecule</span><span class="w"> </span><span class="nx">login</span><span class="w"> </span><span class="o">-</span><span class="nx">s</span><span class="w"> </span><span class="nx">vm</span><span class="w">             </span><span class="err">#</span><span class="w"> </span><span class="nx">login</span><span class="w"> </span><span class="nx">into</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">vm</span>
<span class="w">     </span><span class="err">$</span>
<span class="w">     </span><span class="err">$</span><span class="w">     </span><span class="nx">git</span><span class="w"> </span><span class="nx">clone</span><span class="w"> </span><span class="p">..</span><span class="w">                 </span><span class="err">#</span><span class="w"> </span><span class="nx">clone</span><span class="w"> </span><span class="nx">inside</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">vm</span>
<span class="w">     </span><span class="err">$</span><span class="w">     </span><span class="nx">cd</span><span class="w"> </span><span class="nx">molecular</span>
<span class="w">     </span><span class="err">$</span><span class="w">     </span><span class="p">.</span><span class="o">/</span><span class="nx">bin</span><span class="o">/</span><span class="nx">install</span><span class="p">.</span><span class="nx">sh</span><span class="w"> </span><span class="nx">podman</span><span class="w">      </span><span class="err">#</span><span class="w"> </span><span class="nx">install</span><span class="w"> </span><span class="nx">rpm</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="nx">python</span><span class="w"> </span><span class="nx">packages</span>
<span class="w">     </span><span class="err">$</span><span class="w">     </span><span class="nx">molecule</span><span class="w"> </span><span class="nx">create</span><span class="w"> </span><span class="o">-</span><span class="nx">s</span><span class="w"> </span><span class="nx">podman</span><span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="nx">create</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">container</span><span class="w"> </span><span class="nx">inside</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">vm</span>
<span class="w">     </span><span class="err">$</span><span class="w">     </span><span class="nx">molecule</span><span class="w"> </span><span class="nx">converge</span><span class="w"> </span><span class="o">-</span><span class="nx">s</span><span class="w"> </span><span class="nx">podman</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="nx">run</span><span class="w"> </span><span class="nx">project</span><span class="w"> </span><span class="nx">tasks</span><span class="w"> </span><span class="nx">inside</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">container</span>
<span class="w">     </span><span class="err">$</span><span class="w">     </span><span class="nx">molecule</span><span class="w"> </span><span class="nx">list</span>
<span class="w">     </span><span class="err">$</span><span class="w">     </span><span class="nx">molecule</span><span class="w"> </span><span class="nx">login</span><span class="w"> </span><span class="o">-</span><span class="nx">s</span><span class="w"> </span><span class="nx">podman</span><span class="w">     </span><span class="err">#</span><span class="w"> </span><span class="nx">login</span><span class="w"> </span><span class="nx">into</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">container</span>
</code></pre></div>

<h2 id="usage">Usage</h2>
<ol>
<li>
<p>Create a demo project from the molecule template</p>
<div class="codehilite"><pre><span></span><code> $ cd molecular/projects
 $ cookiecutter --config-file ../templates/molecule
</code></pre></div>

</li>
<li>
<p>Get images and start the web server</p>
<div class="codehilite"><pre><span></span><code>  $ make hole
  $ make it
</code></pre></div>

</li>
<li>
<p>Create new demo scenario from scratch,</p>
<div class="codehilite"><pre><span></span><code>  $ demo/molelcule
  $ molecule init -s scenario -d ...
</code></pre></div>

<p>or use the cookiecutter scenario template for pre-made scenarios,</p>
<div class="codehilite"><pre><span></span><code>  $ cd molecular/projects/demo/molecule
  $ cookiecutter ../../../templates/scenario
</code></pre></div>

</li>
<li>
<p>Use molecule according to the documentation,</p>
<div class="codehilite"><pre><span></span><code>  $ cd projects/molecular
  $ molecule list
  $ molecule create   -s demo
  $ molecule login    -s demo
  $ molecule converge -s demo
</code></pre></div>

</li>
<li>
<p>Clone an existing multi-vm molecule for a specific SSH certificate scenario setup</p>
<div class="codehilite"><pre><span></span><code>  $ cd molecular/projects
  $ git clone https://github.com/lmelwyn/vm.sshca
</code></pre></div>

</li>
<li>
<p>Add the documentation of a molecule to the molecular MkDocs by
      placing a symlink in <em>molecular/docs</em>, <em>e.g.</em>,</p>
<div class="codehilite"><pre><span></span><code>  $ cd molecular/docs
  $ ln -s ../projects/molecule_name/docs
</code></pre></div>

</li>
</ol>
<p>Here, we partly abuse molecule beyond its intended use and may occasionally have to resort to hacks to achieve
a specific outcome. One example is to apply vagrant commands, such as <strong>vagrant up / down</strong>,
directly in the instances vagrant environment placed cachedirs under <em>~/.cache/molecule</em>.</p>
<h2 id="installation">Installation</h2>
<p>Clone the repository,</p>
<div class="codehilite"><pre><span></span><code>      $ git clone https://github.com/lmelwyn/molecular.git
</code></pre></div>

<p>and install all the dependencies using the ansible playbook <em>install.yml</em>,</p>
<div class="codehilite"><pre><span></span><code>      $ ansible-playbook --ask-become-pass install.yml
</code></pre></div>

<p>Alternatively, do a manual installation of the distro and python packages,</p>
<ol>
<li>
<p>install vagrant and libvirt distro packages</p>
<div class="codehilite"><pre><span></span><code>  $ dnf install libvirt vagrant vagrant-libvirt
</code></pre></div>

<p>or</p>
<div class="codehilite"><pre><span></span><code>  $ apt-get install libvirt vagrant vagrant-libvirt
</code></pre></div>

</li>
<li>
<p>Install the requirements, <em>i.e.</em>, Ansible and Molecule</p>
<div class="codehilite"><pre><span></span><code>  $ cd molecular
  $ pip install -r requirements.txt
</code></pre></div>

<p>or</p>
<div class="codehilite"><pre><span></span><code>  $ pip install --user ansible ansible-core ansible-compat ansible-lint
  $ pip install --user molecule molecule-plugins[&#39;podman&#39;,&#39;vagrant&#39;] python-vagrant
  $ pop install --user cookiecutter mkdocs mkdocs-material
</code></pre></div>

</li>
<li>
<p>Fetch latest vagrant base VM images</p>
<div class="codehilite"><pre><span></span><code>  $ vagrant box add rockylinux/8
  $ vagrant box add rockylinux/9
  $ vagrant box add almalinux/8
  $ vagrant box add almalinux/9
  $ vagrant box add fedora/38-cloud-base
  $ vagrant box add alpine/alpine64
  $ vagrant box list
</code></pre></div>

</li>
</ol>
<h2 id="background">Background</h2>
<p>Ansible is a configuration management and orchestration tool. It allows you to define your infrastructure as code,
and manage and automate the configuration and deployment of systems. Ansible uses a simple, descriptive, and human-readable
language to describe your infrastructure and actions, and can be used to manage a wide range of systems, including servers,
networks, and cloud environments.</p>
<p>More generally Ansible may also be used as a workflow system where complex workflows can be created
by organizing tasks into playbooks (executable recipes). The playbooks can then be run manually
or automatically as a part of a CI/CD pipeline, allowing the automation of complex processes
which ensure consistent execution and reproducibility. Additionally, Ansible's integration
with other tools, such as Gitlab, allows you to incorporate Ansible into your continuous integration
and deployment (CI/CD) pipelines. This can help you automate and manage complete reproducible workflows
of various kinds.</p>
<p>There is a large ecosystem build around ansible and many tools focus on the reuse and sharing of code. The
<a href="https://galaxy.ansible.com">Ansible Galaxy</a> portal contains a huge amount of readily available open source
playbooks, roles and more generally collections.</p>
<p>The <a href="https://molecule.readthedocs.io/en/latest/">Ansible Molecule</a> Python package is designed to
aid in the of development and testing of Ansible roles and playbooks for configuration management
and system orchestration. It is an easy and fast way to create complex multi-node test or proof-of-concept
scenarios that works well with both containers and virtual machines, but Molecule may also be slightly
upcycled as minimal container or virtual machine manager for personal projects to make build, runtime or
data analysis workflows in containers or virtual machines.</p>
<p>Historically Molecule came with a number of <a href="https://github.com/topics/molecule-driver">drivers</a>, but recently
a limited number have been moved to the ansible-community developed <a href="https://github.com/ansible-community/molecule-plugins">Molecule Plugins</a>
repository. Here we mainly use the podman and vagrant (with libvirt) plugins for user space containers or
KVM virtual machines.</p>
<p>There are other CLI based frameworks for managing virtual machines, such as
<a href="https://github.com/virt-lightning/virt-lightning">virt-lightning</a> or just the libvirt
provided <a href="https://www.libvirt.org/manpages/virsh.html">virsh</a>, but molecule with the
vagrant plugin just happens be to one that is well-integrated with Ansible and is quite
simple to use in cases where certain level of isolation is required or different OS is needed.</p>
<p>In more advanced cases <a href="https://www.linux-kvm.org/page/Nested_Guests">nested virtualization</a>
allows for development and test of virtualized molecules, <em>e.g.</em>, see the <strong>molecule.minione</strong> repo.</p>
<p>Cookiecutter templates are provided for <strong>fast</strong> configuration of new molecules and scenarios.
The molecule cookiecutter template initializes a MkDocs site per molecule for the documentation
of the molecule.</p>
<h2 id="links">Links</h2>
<ul>
<li><a href="https://ansible.readthedocs.io/en/latest/">Ansible</a><ul>
<li><a href="https://docs.ansible.com/ansible/latest/playbook_guide/playbooks_reuse_roles.html">Roles</a></li>
<li><a href="https://docs.ansible.com/ansible/latest/collections_guide/index.html">Collections</a></li>
</ul>
</li>
<li><a href="https://galaxy.ansible.com/docs/">Ansible Galaxy</a><ul>
<li><a href="https://galaxy.ansible.com/docs/contributing/creating_role.html">Roles</a></li>
<li><a href="https://galaxy.ansible.com/docs/contributing/creating_collections.html">Collections</a></li>
</ul>
</li>
<li><a href="https://libvirt.org">Libvirt</a></li>
<li><a href="https://developer.hashicorp.com/vagrant/docs">Vagrant</a><ul>
<li><a href="https://vagrant-libvirt.github.io/vagrant-libvirt/">Vagrant libvirt</a></li>
</ul>
</li>
<li><a href="https://ansible.readthedocs.io/projects/molecule/">Molecule</a><ul>
<li><a href="https://github.com/ansible-community/molecule-plugins">Molecule plugins</a></li>
</ul>
</li>
<li><a href="https://pypi.org/project/cookiecutter/">Cookiecutter</a></li>
<li><a href="https://www.mkdocs.org/">MkDocs</a><ul>
<li><a href="https://squidfunk.github.io/mkdocs-material/">Material theme</a></li>
</ul>
</li>
</ul>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      2023 L. M. Jensen DTU Research Computing
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": ["header.autohide"], "search": "assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.220ee61c.min.js"></script>
      
    
  </body>
</html>